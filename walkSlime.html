<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>walk.html</title>
    <script type = "text/javascript"
            src = "simpleGame.js"></script>
    <script type = "text/javascript">
        var game;
        var background;
        var character;
        
        function init(){
            game = new Scene();
            background = new Sprite(game, "FieldsTilesetDemo.png", 991, 991);
            background.setSpeed(0,0);
            background.setPosition(400, 300);

            //character = new Sprite(game, "Sword_Run_full.png", 780, 520);
            //character.loadAnimation(780, 520, 130, 130); // 6 คอลัมน์ 4 แถว
            character = new Sprite(game, "Slime1_Walk_body.png", 512, 256); //ภาพและขนาดของตัวละคร
            character.loadAnimation(512, 256, 64, 64); //ขนาดของภาพและขนาดของแต่ละเฟรม
            character.generateAnimationCycles(); //สร้างวงจรการเล่นเฟรม
            //character.renameCycles(["down", "left", "right", "up"]);
            character.renameCycles(new Array("down", "up", "left", "right")); //ชื่อของแต่ละฟรม
            character.setAnimationSpeed(500); //ความเร็วในการเล่นเฟรม

            //start paused
            character.setPosition(400, 300); //ตำแหน่งเริ่มต้นของตัวละคร
            character.setSpeed(0); //เซ็ตความเร็วให้เป็น 0
            character.pauseAnimation(); //หยุดเล่นเฟรม
            character.setCurrentCycle("down"); //เซ็ตว่าตัวละครเริ่มต้นให้เดินไปทิศล่าง
            
            game.start(); //เริ่มเกม
        } // end init
        
        function update(){
            game.clear(); //ล้างหน้าจอ
            checkKeys(); //เช็คปุ่มที่กด
            
            background.update(); //อัพเดทพื้นหลัง
            character.update(); //อัพเดทตัวละคร
        } // end update
        
        function checkKeys(){ //เช็คปุ่มที่กด
            
            if (keysDown[K_LEFT]){
                character.setSpeed(5);
                character.playAnimation()
                character.setMoveAngle(270);
                character.setCurrentCycle("left");
            }
            if (keysDown[K_RIGHT]){
                character.setSpeed(5);
                character.playAnimation()
                character.setMoveAngle(90);
                character.setCurrentCycle("right");
            }                
            if (keysDown[K_UP]){
                character.setSpeed(5);
                character.playAnimation()
                character.setMoveAngle(0);
                character.setCurrentCycle("up");
            }                
            if (keysDown[K_DOWN]){
                character.setSpeed(5);
                character.playAnimation()
                character.setMoveAngle(180);
                character.setCurrentCycle("down");
            }                
            
            if (keysDown[K_SPACE]){
                character.setSpeed(0);
                character.pauseAnimation();
                character.setCurrentCycle("down");
            }

}
        
    </script>
</head>
<body onload = "init()">
</body>
</html>