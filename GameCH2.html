<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>SlimeCH2</title>
    <script type="text/javascript" src="simpleGame.js"></script>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: black;
        }
        canvas {
            display: block;
        }
    </style>
    <script type="text/javascript">
        var game;
        var background;
        var character;
        var wallBushes = [];
        var berryBush;
        var timer;
        var timeLeft = 30;
        var timerDisplay;

        function init() {
            game = new Scene();
            game.setSize(window.innerWidth, window.innerHeight);

            // ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á
            background = new Sprite(game, "BG2.png", window.innerWidth, window.innerHeight);
            background.setSpeed(0, 0);
            background.setPosition(window.innerWidth / 2, window.innerHeight / 2);

            // ‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£
            character = new Sprite(game, "Sprite_Slime_Big.png", 79, 79);
            character.loadAnimation(634, 317, 79, 79);
            character.generateAnimationCycles();
            character.renameCycles(["down", "up", "left", "right"]);
            character.setAnimationSpeed(500);
            character.setPosition(80, 80);
            character.setSpeed(0);
            character.pauseAnimation();
            character.setCurrentCycle("down");

            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏û‡∏∏‡πà‡∏°‡πÑ‡∏°‡πâ
            createWallBushes();
            game.start();

            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏û‡∏∏‡πà‡∏°‡πÑ‡∏°‡πâ
            createBerryBushes();
            game.start();

            createTimerDisplay();
            startTimer();

            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
        createScoreDisplay();
        }

        function createTimerDisplay() {
            timerDisplay = document.createElement("div");
            timerDisplay.style = "position:absolute; top:10px; left:10px; padding:10px; background:white; font-size:20px; font-weight:bold;";
            document.body.appendChild(timerDisplay);
            updateTimerDisplay();
        }


        function startTimer() {
            timer = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                if (timeLeft <= 0) {
                    gameOver("Time's up! Try again?");
                }
            }, 1000);
        }
        function updateTimerDisplay() {
            timerDisplay.innerText = `Time: ${timeLeft}s`;
        }

        function createWallBushes() {
            let bushWidth = 45;
            let bushHeight = 45;

            // ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏û‡∏∏‡πà‡∏°‡πÑ‡∏°‡πâ
            let bushPositions = [
                { x: 20, y: 20 }, { x: 60, y: 20 }, { x: 100, y: 20 }, { x: 140, y: 20 }, { x: 180, y: 20 }, { x: 220, y: 20 }, { x: 260, y: 20 }, { x: 300, y: 20 }, { x: 340, y: 20 }, { x: 380, y: 20 }, { x: 420, y: 20 }, { x: 460, y: 20 }, { x: 500, y: 20 }, { x: 540, y: 20 }, { x: 580, y: 20 }, { x: 620, y: 20 }, { x: 660, y: 20 }, { x: 700, y: 20 }, { x: 740, y: 20 }, { x: 780, y: 20 }, { x: 820, y: 20 }, { x: 860, y: 20 }, { x: 900, y: 20 }, { x: 940, y: 20 }, { x: 980, y: 20 }, { x: 1020, y: 20 }, { x: 1060, y: 20 }, { x: 1100, y: 20 }, { x: 1120, y: 20 }, // ‡∏Å‡∏£‡∏≠‡∏ö‡∏ö‡∏ô
                { x: 20, y: 60 }, { x: 20, y: 100 }, { x: 20, y: 140 }, { x: 20, y: 180 }, { x: 20, y: 220 }, { x: 20, y: 260 }, { x: 20, y: 300 }, { x:20, y: 340 }, { x: 20, y: 380 }, { x: 20, y: 420 }, { x: 20, y: 460 }, { x: 20, y: 500 }, { x: 20, y: 540 }, { x: 20, y: 580 }, // ‡∏Å‡∏£‡∏≠‡∏ö‡∏ã‡πâ‡∏≤‡∏¢
                { x: 1120, y: 60 }, { x: 1120, y: 100 }, { x: 1120, y: 140 }, { x: 1120, y: 180 }, { x: 1120, y: 220 }, { x: 1120, y: 260 }, { x: 1120, y: 300 }, { x: 1120, y: 340 }, { x: 1120, y: 380 }, { x: 1120, y: 420 }, { x: 1120, y: 460 }, { x: 1120, y: 500 }, { x: 1120, y: 540 }, { x: 1120, y: 580 }, // ‡∏Å‡∏£‡∏≠‡∏ö‡∏Ç‡∏ß‡∏≤
                { x: 20, y: 620 }, { x: 60, y: 620 }, { x: 100, y: 620 }, { x: 140, y: 620 }, { x: 180, y: 620 }, { x: 220, y: 620 }, { x: 260, y: 620 }, { x: 300, y: 620 }, { x: 340, y: 620 }, { x: 380, y: 620 }, { x: 420, y: 620 }, { x: 460, y: 620 }, { x: 500, y: 620 }, { x: 540, y: 620 }, { x: 580, y: 620 }, { x: 620, y: 620 }, { x: 660, y: 620 }, { x: 700, y: 620 }, { x: 740, y: 620 }, { x: 780, y: 620 }, { x: 820, y: 620 }, { x: 860, y: 620 }, { x: 900, y: 620 }, { x: 940, y: 620 }, { x: 980, y: 620 }, { x: 1020, y: 620 }, { x: 1060, y: 620 }, { x: 1100, y: 620 }, { x: 1120, y: 620 }, // ‡∏Å‡∏£‡∏≠‡∏ö‡∏•‡πà‡∏≤‡∏á
                { x: 60, y: 140 }, { x: 100, y: 140 }, { x: 140, y: 140 }, { x: 180, y: 140 }, { x: 220, y: 140 }, { x: 260, y: 140 }, { x: 300, y: 140 }, //‡∏ö‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡∏™‡∏∏‡∏î
                { x: 150, y: 300 }, { x: 190, y: 300 }, { x: 230, y: 300 }, { x: 270, y: 300 }, { x: 310, y: 300 },  //‡∏ö‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡∏™‡∏≠‡∏á
                { x: 310, y: 340 }, { x: 310, y: 380 }, { x: 310, y: 420 }, { x: 310, y: 460 }, { x: 310, y: 500 }, { x: 310, y: 540 }, { x: 310, y: 580 }, { x: 310, y: 620 }, //‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡∏ö‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡∏™‡∏≠‡∏á
                { x: 60, y: 460 }, { x: 100, y: 460 }, { x: 140, y: 460 }, { x: 180, y: 460 }, //‡∏ä‡πâ‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏á
               // { x: 410, y: 20 }, { x: 410, y: 60 }, { x: 410, y: 100 }, { x: 410, y: 140 }, { x: 410, y: 180 }, { x: 410, y: 220 }, { x: 410, y: 260 }, //‡∏Ç‡∏µ‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏Å‡∏•‡∏≤‡∏á
                { x: 450, y: 260 }, { x: 490, y: 260 }, { x: 530, y: 260 }, { x: 570, y: 260 }, { x: 610, y: 260 }, { x: 650, y: 260 }, { x: 690, y: 260 }, { x: 730, y: 260 }, { x: 770, y: 260 },
                { x: 770, y: 300 }, { x: 770, y: 340 }, { x: 770, y: 380 }, 
              //  { x: 730, y: 380 }, { x: 690, y: 380 }, { x: 650, y: 380 }, { x: 610, y: 380 }, { x: 570, y: 380 }, { x: 530, y: 380 }, 
              //  { x: 530, y: 420 }, { x: 530, y: 460 }, { x: 530, y: 500 }, 
                { x: 530, y: 380 }, { x: 530, y: 420 }, { x: 530, y: 460 }, { x: 530, y: 500 }, 
                { x: 690, y: 500 }, { x: 690, y: 540 }, { x: 690, y: 580 }, { x: 690, y: 620 },
                { x: 550, y: 140 }, { x: 590, y: 140 }, { x: 630, y: 140 }, { x: 670, y: 140 }, { x: 710, y: 140 }, { x: 750, y: 140 }, { x: 790, y: 140 }, { x: 830, y: 140 }, { x: 870, y: 140 }, { x: 910, y: 140 }, { x: 950, y: 140 },
                { x: 950, y: 180 }, { x: 950, y: 220 }, { x: 950, y: 260 }, { x: 950, y: 300 }, { x: 950, y: 340 }, { x: 950, y: 380 }, { x: 950, y: 420 }, { x: 950, y: 460 }, { x: 950, y: 500 }, { x: 950, y: 540 }, { x: 950, y: 580 }, { x: 950, y: 620 }, 
            
            ];

            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏û‡∏∏‡πà‡∏°‡πÑ‡∏°‡πâ‡πÉ‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î
            for (let pos of bushPositions) {
                let bush = new Sprite(game, "Cactus2.png", bushWidth, bushHeight);
                bush.setSpeed(0);  // üö´ ‡∏´‡∏¢‡∏∏‡∏î‡∏û‡∏∏‡πà‡∏°‡πÑ‡∏°‡πâ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Ç‡∏¢‡∏±‡∏ö
                bush.setPosition(pos.x, pos.y);
                wallBushes.push(bush);
            }
        }

        var score = 0; // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
function createScoreDisplay() {
    // ‡∏™‡∏£‡πâ‡∏≤‡∏á div ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
    scoreDisplay = document.createElement("div");
    scoreDisplay.style = "position:absolute; top:10px; right:10px; padding:10px; background-color:rgba(0, 0, 0, 0.7); color:white; font-size:20px; font-weight:bold; border-radius:5px;";
    document.body.appendChild(scoreDisplay);
    updateScoreDisplay();  // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á
}

function createGameCard(title, buttons) {
    // ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏Å‡πà‡∏≤‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
    let existingCard = document.getElementById("gameCard");
    if (existingCard) existingCard.remove();

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÉ‡∏´‡∏°‡πà
    let card = document.createElement("div");
    card.id = "gameCard";
    card.style = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 300px;
        padding: 20px;
        background: white;
        text-align: center;
        border-radius: 10px;
        box-shadow: 0px 4px 10px rgba(0,0,0,0.2);
        z-index: 1000;
    `;

    let titleText = document.createElement("h2");
    titleText.innerText = title;
    card.appendChild(titleText);

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏ï‡πà‡∏≤‡∏á ‡πÜ
    buttons.forEach(btnData => {
        let button = document.createElement("button");
        button.innerText = btnData.text;
        button.onclick = btnData.onClick;
        button.style = `
            margin: 10px;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            background: ${btnData.color};
            color: white;
        `;
        card.appendChild(button);
    });

    document.body.appendChild(card);
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á
function updateScoreDisplay() {
    scoreDisplay.innerText = "Score: " + score;
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà
function checkCollision() {
    let charLeft = character.x - character.width / 2;
    let charRight = character.x + character.width / 2;
    let charTop = character.y - character.height / 2;
    let charBottom = character.y + character.height / 2;

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ä‡∏ô‡∏Å‡∏±‡∏ö‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà
    for (let i = 0; i < berryBushes.length; i++) {
        let berry = berryBushes[i];
        let berryLeft = berry.x - berry.width / 2;
        let berryRight = berry.x + berry.width / 2;
        let berryTop = berry.y - berry.height / 2;
        let berryBottom = berry.y + berry.height / 2;

        if (charRight > berryLeft && charLeft < berryRight && charBottom > berryTop && charTop < berryBottom) {
            // ‡∏ñ‡πâ‡∏≤‡∏ä‡∏ô‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà, ‡πÉ‡∏´‡πâ‡∏•‡∏ö‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà‡∏à‡∏≤‡∏Å array
            berryBushes.splice(i, 1);  // ‡∏•‡∏ö‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å array
            score++;  // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏ï‡πâ‡∏°
            i--;  // ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏•‡∏ö item ‡∏à‡∏≤‡∏Å array, ‡∏ï‡πâ‡∏≠‡∏á‡∏•‡∏î‡∏Ñ‡πà‡∏≤ i ‡∏•‡∏á
            updateScoreDisplay();  // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà
        }
    }
}

        var score = 0; // ‡πÅ‡∏ï‡πâ‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
        var berryBushes = []; // ‡πÄ‡∏Å‡πá‡∏ö‡∏û‡∏∏‡πà‡∏°‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà‡πÅ‡∏¢‡∏Å‡∏à‡∏≤‡∏Å wallBushes

function createBerryBushes() {
    let bushWidth = 40;
    let bushHeight = 40;

    // ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏û‡∏∏‡πà‡∏°‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà
    let bushPositions = [
        { x: 100, y: 550 }, { x: 430, y: 550 }, { x: 430, y: 100 }, { x: 1030, y: 100 }, { x: 1030, y: 550 }
    ];

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏û‡∏∏‡πà‡∏°‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà‡πÉ‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î
    for (let pos of bushPositions) {
        let bush = new Sprite(game, "berry.png", bushWidth, bushHeight);
        bush.setSpeed(0);  // üö´ ‡∏´‡∏¢‡∏∏‡∏î‡∏û‡∏∏‡πà‡∏°‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Ç‡∏¢‡∏±‡∏ö
        bush.setPosition(pos.x, pos.y);
        berryBushes.push(bush); // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà‡πÑ‡∏õ‡∏¢‡∏±‡∏á array ‡πÅ‡∏¢‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏´‡∏≤‡∏Å‡∏à‡∏≤‡∏Å wallBushes
    }
}

function checkCollision() {
    let charLeft = character.x - character.width / 2;
    let charRight = character.x + character.width / 2;
    let charTop = character.y - character.height / 2;
    let charBottom = character.y + character.height / 2;

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ä‡∏ô‡∏Å‡∏±‡∏ö‡∏û‡∏∏‡πà‡∏°‡πÑ‡∏°‡πâ (‡∏´‡∏≤‡∏Å‡∏ä‡∏ô‡πÉ‡∏´‡πâ‡∏´‡∏¢‡∏∏‡∏î)
    for (let bush of wallBushes) {
        let bushPadding = 10;
        let bushLeft = bush.x - bush.width / 2 + bushPadding;
        let bushRight = bush.x + bush.width / 2 - bushPadding;
        let bushTop = bush.y - bush.height / 2 + bushPadding;
        let bushBottom = bush.y + bush.height / 2 - bushPadding;

        if (charRight > bushLeft && charLeft < bushRight && charBottom > bushTop && charTop < bushBottom) {
            character.setPosition(character.lastX, character.lastY);
            character.setSpeed(0);
            return;
        }
    }

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ä‡∏ô‡∏Å‡∏±‡∏ö‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà
    for (let i = 0; i < berryBushes.length; i++) {
        let berry = berryBushes[i];
        let berryLeft = berry.x - berry.width / 2;
        let berryRight = berry.x + berry.width / 2;
        let berryTop = berry.y - berry.height / 2;
        let berryBottom = berry.y + berry.height / 2;

        if (charRight > berryLeft && charLeft < berryRight && charBottom > berryTop && charTop < berryBottom) {
            berryBushes.splice(i, 1);  // ‡∏•‡∏ö‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å array
            score++;  // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏ï‡πâ‡∏°
            i--;  
            updateScoreDisplay();  

            // ‚úÖ ‡∏ä‡∏ô‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏£‡∏ö 5 ‡∏•‡∏π‡∏Å ‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏≠‡∏¢‡∏π‡πà
            if (score === 5 && timeLeft > 0) {
                gameWin();
            }
        }
    }
}



function gameOver() {
    clearInterval(timer);
    createGameCard("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏û‡πâ‡πÅ‡∏•‡πâ‡∏ß!", [
        { text: "Restart", color: "red", onClick: () => location.reload() }
    ]);
}

function gameWin() {
    clearInterval(timer);
    createGameCard("‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏ô‡∏∞‡πÅ‡∏•‡πâ‡∏ß!", [
        { text: "Restart", color: "green", onClick: () => location.reload() },
        { text: "Next Stage", color: "blue", onClick: () => alert("Next stage coming soon!") }
    ]);
}

function update() {
    game.clear();
    checkKeys();        // ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°
    background.update();
    character.update(); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£
    checkCollision();   // ‡∏ï‡∏£‡∏ß‡∏à‡∏ä‡∏ô‡∏Å‡∏±‡∏ö‡∏û‡∏∏‡πà‡∏°‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà

    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏û‡∏∏‡πà‡∏°‡πÑ‡∏°‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏û‡∏∏‡πà‡∏°‡πÑ‡∏°‡πâ‡πÑ‡∏°‡πà‡∏´‡∏≤‡∏¢)
    for (let bush of wallBushes) {
        bush.update();
    }

    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡∏≠‡∏¢‡∏π‡πà
    for (let berry of berryBushes) {
        berry.update();
    }

    // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏ö‡∏ô
    game.drawText("Score: " + score, window.innerWidth - 150, 50, "white", "20px Arial");
}


function checkKeys() {
            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà (‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏ä‡∏ô)
            character.lastX = character.x;
            character.lastY = character.y;

            let moving = false; // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏î‡∏¥‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏°

            if (keysDown[K_LEFT]) {
                character.setSpeed(10);
                character.setMoveAngle(270); // ‡πÑ‡∏õ‡∏ã‡πâ‡∏≤‡∏¢
                character.setCurrentCycle("left");
                moving = true;
            } 
            if (keysDown[K_RIGHT]) {
                character.setSpeed(10);
                character.setMoveAngle(90);  // ‡πÑ‡∏õ‡∏Ç‡∏ß‡∏≤
                character.setCurrentCycle("right");
                moving = true;
            } 
            if (keysDown[K_UP]) {
                character.setSpeed(10);
                character.setMoveAngle(0);   // ‡∏Ç‡∏∂‡πâ‡∏ô
                character.setCurrentCycle("up");
                moving = true;
            } 
            if (keysDown[K_DOWN]) {
                character.setSpeed(10);
                character.setMoveAngle(180); // ‡∏•‡∏á
                character.setCurrentCycle("down");
                moving = true;
            }

            if (moving) {
                character.playAnimation(); // ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏î‡∏¥‡∏ô‡∏≠‡∏¢‡∏π‡πà ‡πÄ‡∏•‡πà‡∏ô‡πÅ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô
            } else {
                character.setSpeed(0);       // ‡πÑ‡∏°‡πà‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏∞‡πÑ‡∏£ ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏î‡∏¥‡∏ô
                character.pauseAnimation();  // ‡∏´‡∏¢‡∏∏‡∏î‡πÅ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô
            }
        }
        
        window.onresize = function () {
            let newWidth = window.innerWidth;
            let newHeight = window.innerHeight;
            game.setSize(newWidth, newHeight);

            background.setPosition(newWidth / 2, newHeight / 2);
            // ‡πÑ‡∏°‡πà‡∏¢‡∏∏‡πà‡∏á‡∏Å‡∏±‡∏ö character ‡∏≠‡∏µ‡∏Å‡∏ï‡πà‡∏≠‡πÑ‡∏õ!
        };

    </script>
</head>
<body onload="init()">
</body>
</html>